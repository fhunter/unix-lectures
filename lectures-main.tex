\par Лекции по администрированию системы Unix.
\par \\

\par \underline{\textbf{Общая
идеология Unix(что это, с кем его едят и
чем он хорош).}}
\par \\

\par \textbf{Типы
файлов.}
\begin{enumerate}
	\item \par Просто
	файлы.
	\item \par Каталоги.
	\item \par Именованные
	каналы(FIFO) — одно из средств связи
	программ в Unix(связка программ).
	\item \par Файлы
	устройств.
\end{enumerate}
\par 
1)символьные(клавиатура...)
\par 
2)блочные
\par  cat
test.wav>/dev/dsp — на сетевую карту
\par  dev —
каталог с устройствами
\par  dsp —
историческое название звуковой карты
\begin{enumerate}
	\item \par Ссылки
\end{enumerate}
\par 
1) мягкие(...путь к файлу)
\par 
2) жесткие(нельзя делать на каталог,
находятся в пределах только 1 устройства,
2ая копия файла)
\par  Дерево
каталога едино. Корневой каталог
развивается деревом.
\par   /\_
\par     |
\par     /mnt/
\par            
\_/disk a
\par  Существует
команда, существует система форматирования.
\par \\

\par \textbf{Имена
файлов.}
\par 255 символов
на длину пути.
\par  /полный
путь/ имя файла
\par \\

\par  test.txt
\par  test.txt.gz
\par \\

\par Unix и
Unix-like.
\par \\

\par Cygwin —
представляет командную строку(Unix-like)
\par Не
проходят сертификацию, но работают на
базе Unix.
\par Соответствующие
стандарты:
\par Single Unix
Spetification
\par POSIX
\par \\

\par \textbf{А почему
систем так много?}
\par Unix\_history-simple
\par \\

\par Системы
— открытые, закрытые, смешанные.
\par \\

\par Каждая
программа при входе имеет 3 потока:
\begin{enumerate}
	\item \par поток
	ввода		stdin
	\item \par поток
	вывода 	stdout
	\item \par поток
	ошибок	stderr
\end{enumerate}
\par LS./
>>.../list.txt
\par  2>/\underline{dev/nu}//

\par         |
\par    фиктивное
устройство
\par Ошибки
пойдут не в файл, а их можно будет увидеть
на экране.
\par  сat
test.txt-<.../file2.txt — входной файл берется
из стандартного потока ввода
\par  cat
test.txt.../file2.txt — выведет на экран.
\par  

\par \textbf{Конверизация
команд.}
\par Есть
таблица, хотим выбрать 2 столбца и их
отсортировать.
\par  awk —
обработка конечных данных
\par  awk
-F,'\{print\$1\$2\}'/sort — отсортирован
\par             
  выбран
\par  sort/uniq-c
— посчитать количество уникальных
строчек(кол-во\_что за строчка)
\par  sort —
набор параметров
\par Все есть
в документации.
\par Представление
имен файлов — латынь, цифры, подчёркивания,
минусы.
\par «test\_test»
- без кавычек команда обозначит 2 разных
файла
\par \\

\par \textbf{Понятие
командной строки.(SHELL)}
\par 
Приемущества:
\par 
Повторяющиеся действия легко
автоматизировать(как язык программирования)
\par 
\\

\par  for
i in *.jpg; do
\par 
	convert\$i-resize 100x100$\backslash$          - создаем новое имя
и конвертируем его
\par 
	$\backslash$basename\$i.jpg\_$\backslash$thumb.jpg
\par  done
\par  test.jpg
\par 
test\_thimb.jpg
\par \\

\par  for i in*;
do
\par 	name=echo\$i
lawk-F.'\{print\$1\}'
\par 	extension=echo\$lawk-F.\{print\$2\}'
\par 	mv\$\{extension\}/\$name
\par  done
\par \\

\par \textbf{Основные
каталоги(FHS).}
\par /bin
— программы, необходимые для запуска
системы(bin — пользовательская, sbin - 
	администраторская)
\par 
/sbin
\par 
/boot — файлы для загрузки
системы(ядро+вспомогательные файлы)
\par 
/home — домашние каталоги пользователей
\par 
/ets — настройки системы
\par 
/lib — базовый набор системных библиотек(ниже
уровнем — драйвера) 

\par /usr
— дополн.файлы	-/bin — не требуются для
начальной
\par 
				-/sbin    загрузки
\par 
				-/lib — системные библиотеки
\par 
				-/local — м.б.такая же иерархия(на
конкретном компьютере)
\par 
				-/share — вспомогательные файлы для
программ 

\par 
				-/include — файлы хедеров(комплект
разработчика)
\par 
				-/doc — документация 

\par 
/dev — файлы устройств(ЖД, видео карта,
звуковая карта)
\par 
/var — системные, часто изменяемые файлы
системы
\par 
/tmp — временные файлы
\par 
/opt — опциональные пакеты, другие
программы
\par 
Обычный пользователь /tmp, /home.
\par 
/mnt — историческое место монтирования
систем
\par 
/media — место монтирования систем, хранения
дисков
\par 
pmount — монтирование съемных дисков
\par 
\\

\par 
pmount/dev/sda — для обычного пользователя(монтирование
флешки)
\par 
pumount... - указать имя устройства и куда
она будет смонтирована
\par 
\\

\par \textbf{Права
доступа к файлам.}
\par 3
категории: |\_\_\_\_|
|\underline{rwx|}
|\underline{rwx}|
|\underline{rwx}|
\par 
1)владелец
\par 
2)группа
\par 
3)все остальные
\par 
\\

\par 
r — чтение
\par 
w — запись
\par 
x — исполнение 

\par 
Разрешить исполнение - «1» - исполняемый
файл. Для каталогов — бит исполнения —
разрешить переходить в каталог(смотреть
можно, переходить нельзя/ смотреть
нельзя, переходить можно)
\par 
Владелец — кто создал файл.
\par 
Группа — для какой группы.
\par 
Администратор может сменить группу и
владельца.
\par 
ECL — ограничить права доступа(этому
пользователю можно, этому нельзя, одной
грппе можно, другой нельзя).
\par 
\\

\par 
\textbf{Текстовый редактор.}
\begin{enumerate}
	\item \par 
	vi/vim — улучшенный(существует по
	Windows/Dos)
\end{enumerate}
\par 
Режим редактирования, режим команд.
\begin{enumerate}
	\item \par 
	nano/pico — проще некуда
	\item \par 
	mcedit — F10, Esc0 — выход.
\end{enumerate}
\par 
Умеет показывать подсветку синтаксиса.
\begin{enumerate}
	\item \par 
	emacs (существует под Windows, Max)
\end{enumerate}
\par 
Программируемый, как и vi( на lisp), умеет
прыгать с точки слова на ошибки.
\par 
\\

\par 
  

\par 
Ctrl+X, Ctrl+Z, Ctrl+C — выход 

\par 
Ctrl+Alt+Backspace — убиение графического режима
\par 
Esc+:+Q(!) - vi (! - без сохраниения)
\par 
nano/pico — Ctrl+X 

\par 
Ctrl+C — завершение программы
\par 
Ctrl+Z — программа уходит в фоновый режим
\par 
rm-fr\_* - снести систему 

\par 
Ctrl+Alt+F1 — переключение в текстовый режим
\par 
Alt+F7 — обратно в графический режим.
\par 
\\

\par 
\textbf{Работа в текстовом режиме.}
\begin{enumerate}
	\item \par 
	mcedit
\end{enumerate}
\par 
F2 — сохранить
\par 
Shift+F2 — сохранить как
\par 
F3 — выделение/отмена блока
\par 
F5 — копирование блока
\par 
B — идет выделение
\par 
M — файл модифицирован
\par 
F8 — удалить 

\par 
F9 — меню МС
\par 
F6 — переместить 

\par 
F10 — выход 

\par 
Ctrl+Z — выход в фон
\par 
\\

\begin{enumerate}
	\item \par 
	pico/nano
\end{enumerate}
\par 
Ctrl+o — записать 

\par 
Ctrl+k — вырезать 

\par 
Ctrl+u — омена вырезки
\par 
Ctrl+w — поиск 

\par 
Ctrl+v — следующая строка
\par 
Ctrl+t — проверка орфографии
\par 
Ctrl+x — выход  

\par 
Ctrl+y — предыдущая строка\\Чтобы записать
файл под другим именем надо просто
изменить имя(Y/N/Ctrl+C — для отмены).
\begin{enumerate}
	\item \par 
	vim(vi)
\end{enumerate}
\par 
Esc+:+q — выход 

\par 
Esc+:+q+! - принудительный выход 

\par 
vimtutor — учебник по vim
\par 
Ctrl+C+Reset — если убили консоль
\par 
vi+Tab+Tab
\par 
n, j, k, l — перемещение курсора
\par 
Vim поддерживает вкладки
\par 
:tabmew
\par 
:map<F2> <esc>:tabprev<cr>
\par 
<esc>:wq! - выход с сохранением
\par 
x — удалить символ
\par 
i — вставка текста
\par 
<esc>:\_имя файла
\par 
<esc>d\$ - удаление текста до конца строки
\par 
dd — удаление
\par 
\\

\par 
\textbf{POSIX.}
\par 
сd — изменить директорию
\par 
pwd — показать, где я нахожусь
\par 
find — пойск файла(где — имя — критерий)
\par fg
— отправить процесс на передний план
работы   X
\par 
bg — оправить процесс в фон
\par 
jobs — список процессов в данной оболчке
\par 
Crtl+z — остановить текущий процесс
\par 
X — Команды управления процессами
\par 
\\

\par 
\underline{Новигация по файловой системе.}
\par 
mkdir — создание каталога
\par 
mkdir -p — создает все каталоги в пути, если
они отсутствуют
\par 
rm — удалить каталог
\par 
rm -f — принудительно удалить
\par 
rm -r — рекурсивно удалить
\par 
rm -fr\_имя каталога
\par 
\\

\par 
\underline{Создание файла.}
\par 
touch - «потрогать», обновляет дату доступа
к файлу или создает пустой файл (touch
каталог/имя файла)
\par 
ln — создает ссылки
\par 
cp — копирование 

\par 
mv — перемещение
\par 
первая буква+tab+tab — все доступные списки
команд
\par 
pwd — посмотреть текущий путь
\par 
cat — слияние нескольких файлов(cat+имена
файлов подряд)
\par 
\\

\par 
\underline{Команды-пейджеры.}
\par 
More — смотреть файлы только построчно
\par 
less — поиск в тексте, позволяет крутить
текст
\par 
most — построчно 

\par 
ls — просмотр каталога
\par 
\\

\par 
\underline{Команды смены прав доступа.}
\par 
Chmod — меняет режимы доступа файлов
\par 
chown — меняют владельца доступа(только
администратор)
\par 
chgrp — меняют группу доступа(только
администратор)
\par 
chgrp -R - рекурсивно
\par 
\\

\par 
\underline{Если потерялись в системе(справка).}
\par 
Man — найти файл, если знаем где он(справка)
\par 
man\_имя статьи
\par 
man\_№раздела\_имя статьи
\par 
apropos — найти файл, если не знаем где он
\par 
apropos\_список ключевых слов
\par 
Q — выход
\par 
info — справка + подробная документация
\par 
\\

\par 
\underline{Команды управления процессами.}
\par 
Ps — посмотреть список процессов
\par 
top — начал тормозить компьютер(чем занят
компьютер в данный момент) Q — выйти из
команды
\par 
ps ax — показывает все процессы
\par 
kill — завершить процесс(посылает сигнал
процессу)
\par 
killall - «убивает» несколько процессов
\par 
kill -9\_имя программы - «добить»(аварийное)
\par 
kill -15 — мягко «добить»
\par 
[-20 — 19] — приоритеты процессов
\par 
\\

\par 
\underline{Управление приоритетом.}
\par 
Nice — изменение приоритета(снизить
можно, а повысить — нет)
\par 
renice — меняет приоритет уже запущенного
процесса
\par 
\\

\par 
\underline{Свободное место.}
\par 
Df — свободное место в файловой системе(в
количестве блоков)
\par 
df -h — покажет понятно
\par 
du — занятое место(по умолчанию текстовый
каталог) задает путь — в заданном пути
\par 
free — состояние памяти
\par 
mount — монтирование 

\par 
umout — демонтирование 

\par 
outafs — команда монтирования устройства
\par 
sync — сбрасывает на диск всё содержимое
пользователя
\par 
fdisk\_имя устройства — разбивка устройства

\par 
cfdisk\_имя устройства — разбивка 

\par 
fdformat — форматирование дискеты
\par 
mkfs — make fale system 

\par 
fsck — проверка файловой системы(проверяет
либо вносит изменения)
\par 
alias — создает псевдонимы команд
\par 
sed — строковый редактор(неинтер.текстовый
редактор)
\par 
awk — табличный процессор(для обработки
таблиц)
\par 
bc — калькулятор, си-подобный, программируемый
\par 
tail — выводит конец файла (tail -f\_имя файла)
\par 
wail — ждет завершения отправления в фон
процессов
\par 
head — начало файла
\par 
time — мереет время исполнения команды
\par 
date — выводит время(в куче форматов)
\par 
sleep — подождать(какой период - параметром)
\par 
sort — отсортировать входной поток,
вывести на выходной
\par 
uniq — принимает на вход сортированный
список, принимает уникальные
\par 
at — исполнить команду за определенный
срок
\par 
crontab — управление планировщиком
\par 
(sleep 1h)
\par 
false — ничего не делает, всегда
неуспешно(возвращает нулевой код)
\par 
true — ничего не делает, всегда успешно(в
циклах)
\par 
yes — выдает непрерывно у и новыу строку(не
писать поттверждения)
\par 
\\

\par \underline{\textbf{SHELL}}.
\par 
Linux отличает программы по исполняемому
биту, а дальше уже разбирает что это за
файл.
\par 
\\

\begin{enumerate}
	\item \par 
	ELF
	\item \par 
	текстовый файл
\end{enumerate}
\par 
\#!/bin/sh/        usr/bin/pyton
\par 
\#!/bin/sh- этот файл интегрировать. Скрипт
лучше начинать с написания именно этой
строчки.
\par 
По хорошему всё комментировать.
\par 
\# - комментарий начинается.
\par 
\\

\par \underline{\textbf{Переменные
циклы. Упрощенные структуры.}}
\par 
Переменные : имя =...
\par 
\$имя — обращение
\par 
su61n01
\par 
su61 — group, 01 — number
\par 
\$\{group\}n\$number — если имя окружения сливается
с другим
\par 
\\

\par 
\underline{Набор стандартных переменных окружений.}
\par 
HOME, USER, PATH, PWD, OLDPWD
\par 
HOME — показывает где лежит домашний
каталог пользователя
\par 
fhunter/...HOME
\par 
USER — имя текущего пользователя
\par 
PATH — путь, по которому система будет
искать соответвующие пути, список
разделяется двоеточиями
\par PWD
            ставятся Shell'ом
\par 
OLDPWD
\par 
PWD — тот каталог, где сейчас стоим
\par 
OLDPWD — место, где стояли до этого
\par 
Посмотреть список окружений или создать
свою можно командой export.
\par 
\\

\par 
\underline{Управляющие структуры.}
\par 
Циклы: 3 типа
\par 
for, while, until... do
\par 
help — справка по встроенным командам
\par 
help\_имя — справка по имени
\begin{enumerate}
	\item \par 
	for имя\_переменной in список; do
\end{enumerate}
\par 
тело\_цикла
\par 
done
\par 
* for i in 'seq 1 10'; do
\par 
Конструкция с апострофами заменяет
себя на результаты команды, находящихся
в апострофах.
\par 
Seq — формирует числовую последовательность(если
2 аргумента, то с 1 по 2 с шагом 1, если 3
аргумента, то с 1 по 3 с шагом 2го аргумента)
\begin{enumerate}
	\item \par 
	while команда; do
\end{enumerate}
\par 
тело
\par 
done
\par 
Вызывает команду, и если команда
завершилась успешно, отправляет её в
тело цикла.
\par 
while :; do 

\par 
done — бесконечный цикл.
\begin{enumerate}
	\item \par 
	intil команда; do
\end{enumerate}
\par 
тело
\par 
done
\par 
Сначала исполняется тело, потом команда
и если команда успешна, то идём на выход.
\par 
\\

\par 
\underline{Управляющие структуры.}
\par 
if
команда; then                                               if
команда; then
\par 
условие истинно                                        
      команды
\par 
elsc                                                                 
    fi
\par 
условие ложно
\par 
fi
\par 
\\

\par 
\\

\par 
Если команда верна, то условие истинно,
если работает ложно — в ложное условие
\par 
Сокращенная форма if:
\begin{enumerate}
	\item \par 
	команда\$\$команда — запускает 1 команду,
	при успешном выходе запускает 2 команду
	\item \par 
	команда||команда — если команда
	использовалась неуспешно, исполнить
	2ую команду.
\end{enumerate}
\par 
2 оператора(к циклам):
\par 
continue — переводит на заголовок цикла
\par 
break\_[N] — есть несколько уровней, выйти
на N уровней выше
\par 
case переменная in
\par 
pattern([pattern]...) - регулярные выражения,
разделяются - |
\par 
команды
\par 
;;
\par 
esac
\par 
После первого совпадения он выходит(исполняет
только 1 ветку)
\par 
Проанализировать содержимое переменной:
\par 
case \$i in
\par 
on|ON) echo ON
\par 
;;
\par 
off|OFF)
\par 
echo OFF
\par 
;;
\par 
esac
\par 
\\

\par \underline{\textbf{Арифметика
в SHELLе.}}
\par 
\$!
\par 
test
\par 
\$((12*12))
\par 
i=\$((12*12)) — присвоение переменной
\par 
Shell не понимает арифметику с плавающей
запятой.
\par 
BC — калькулятор.
\par 
\\

\par \underline{\textbf{AWK
табличный процессор.}}
\par 
Управляется Си-подобным языком.
\par 
awk '\{print\$1\}' — количество строчек(первое
поле со всех строчек)
\par 
вычислить среднее, max и min:
\par 
awk'\{SUM = SUM+\$1\}END\{print SUM\}'
\par 
rtt min/avg/max/mdev
\par 
rtt min/avg/max/dev = 10/20/30/0.5 ms
\par 
рассчитать глобальный min, max, среднее
\par 
awk'\{print\$4\}'|10/20/30/0.5 — вытаскиваем 4ю строку
\par 
awk -F$\backslash$/BEGIN\{N=0; MIN=1000000; MAX=0; SUM=0\}$\backslash$
\par 
где F — указывает разделитель полей
\par 
\{MIN=(\$1<MIN)?\$1:MIN; MAX=(\$3<MAX)?3:MAX; SUM=SUM+\$2;
N=N+1\}END'\{print MIN,SUM/N, MAX\}'/sed'S/ /$\backslash$n/g
\par 
S — заменить
\par 
sed — строчный редактор.
\par 
Пример: есть огромный файл, надо в скрипте
что-то поменять.
\par 
bc — калькулятор с произвольной точностью,
Си-образный, поддерживает sin, cos, tn,ln,
работу с однобуквенными переменными.
\par 
В скриптах:
\par 
bc -l<<EOF — посчитает корень переменной
\par 
i = read()
\par 
print sqrt(i)
\par 
EOF — записать в отдельный файл.
\par 
\\

\par \underline{\textbf{Сети.}}
\par 
NCP до 80 г.
\par 
TCP-IP с 83 г.(проще маршрутизация)
\par 
Адресация: IP-адрес — 4байта
\par 
127.0.0.1 — адрес, 23(порт) — квартира. Портов
65000. 

\par 
Адрес-источник, порт-источник,
адрес-приёмник, порт-приёмник.
\par 232
= 4 млрд.
\par 
Диапазоны узлов: 192.168.0.0/16 — маска.
\par 
                               10.0.0.0/8
\par 
		         172.16.0.0
\par 
		         172.32.0.0
\par 
Компьютеры организованы в сети
иерархически(сеть ->большая сеть...)
\par \underline{192.168.10}.1-адрес
компьютера
\par 
     |
\par 
адрес сети
\par 
255.255.255.0
\par 
192.168.10.1/24 — выделяет биты
относительно к адресу сети(маска)
\par 
                       |
\par 
количество единичек в маске(маска
по стандарту должна быть непрерывной).
\par 
\\

\par 
\underline{Маршрутизация.}
\par 
Компьютеру надо знать, как
посылать пакет. Компьютер знает свой
адрес.
\par 
\\

\par 
107.107.107.2/24
                                                                     
                           200.200.200.200/24
\par 
\\

\par 
\\

\par 
\\

\par 
Несколькими адресами на компьютере
можно пользоваться одновременно.
\par 
Blatkast — широковещательная
рассылка(Unikast — 1 к 1му, Blatkast, MultyKast — 1 к
многим), на всех узлах интернета(локальные
сети). Так же может показывать по первому
совпадению, отправляет информацию(адрес)
куда надо. Надстройки должны поддерживается
на всем пути следования.
\par 
\underline{Таблица маршрутизации.}

	
	
	
	
	
		
			\par Сеть
		
		
			\par Маска
		
		
			\par Гейт
		
		
			\par Интерфейс
		
	
	
		
			\par 107.107.107.0
		
		
			\par 255.255.255.0
		
		
			\par 0.0.0.0
		
		
			\par e0
		
	
	
		
			\par 0.0.0.0
		
		
			\par 0.0.0.0
		
		
			\par 107.107.107.1
		
		
			\par e0
		
	

\par 
Маршрут
по умолчанию.
\par 
sbin/route -n — посмотреть маршрутизацию.
\par 
В таблице может быть несколько
маршрутов(не увеличивать трафик).
Конечный адрес прописан в пакете.
\par 
\\

\par 
\underline{Семиуровневая модель OSI.}
\par 
Стандартный набор протоколов.
Всего 7 уровней.
\par 
-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-$\,$-OSI
\par 
прикладной
\par 
сеансовый
\par 
представительный
\par 
транспортный(TCP(контролирует
доставку) или UDP(передача голоса, видео,
более легк.)
\par 
сетевой(IP)
\par канальный
    универсальный
\par 
физический
\par 
Разделяет реализацию разных
протоколов(упрощается реализация).
\par 
\\

\par 
\\

\par 
\\

\par 
\\

\par 
\\

\par 
\\

\par 
\underline{Среды передачи.}
\par 
Пропускная способность —
количество информации, переданное за
единицу времени.
\par 
Hub — рассылает пакеты на все
компьтеры.
\par 
Svitch — запоминает куда надо
отсылать информацию(пакет) и присылает
именно куда нужно.
\par 
Сеть может бегать по разным
средам.\\Чем плохи большие сети? -
Появляется много широковещательных
пакетов, компьтеры тормозят.
\par 
\\

\par 
\underline{Адресация DNS.}
\par 
Соответствие символьного имени.
\par 172.16.64.10
— dctisrr.\underline{dcti.sut.ru}
\par 
ets/hosts — соответствие цифрового
адреса символьному.
\par 
DNS — domain name system.
\par 
Доменное имя — имя узла(покупаются)
до 10000\$ и больше.
\par 
Захват домена(хакер).
\par 
Бывают разного уровня:
\begin{enumerate}
	\item \par 
	ru — домены стран
\end{enumerate}
\par 
com — коммерческие
\par 
net — сетевые организации
\par 
edu — образование 

\par 
gov — производство 

\par 
org — организация 

\par 
nul — США вояки     (1)
\begin{enumerate}
	\item \par 
	spb.ru  (2)
	\item \par 
	... .spb.ru (3)
\end{enumerate}
\par 
pop.mail.ru
\par 
smp.mail.ru
\par 
Есть корневые сервера, в которых
список куда за каким доменом обращаться.
\par 
\underline{Программные продукты.}
\par 
Bind - «дырка на дырке»
\par 
DjDNS — специализированная лицензия,
некоторые ограничения.
\par 
TTL(time to live) — сколько времени хранятся
записи DNS.
\par 
В DNS все хранится в виде записи(разных
типов):
\par 
A — при обращении из имени в ip-адрес
\par 
PTR — обратное образование(из ip-адреса
в имя)
\par 
NS — на входе домена при выходе
\par 
MX — где искать почтовый сервис домена
\par 
TXT — можно записать любой текст
\par 
SRV — используется для поиска серверов
в домене(Jabber, SIP — ip-телефония).
\par 
\\

\par \textbf{Структура
сети кафедры ЦВТИ.          }172.16.64.1
\par 
\\

\par 
\\

\par 

                                                                
маршрутизатор
\par 
    \textbf{Ц}			
      - вирт.машины
\par 
    \textbf{В}				
\par 
    \textbf{Т}
\par 
    \textbf{И}
\par 
\\

\par 
\\

\par 
\\

\par 
Сети других кафедр не видят друг друга.
\par 
KDS — хранятся пароли пользователей.
\par 
Признаки отказа: пользователь не входит
в сеть.
\par 
Как проверить, что KDS не «сдох»(kerberos):
входим на локальную машину либо как
администратор, либо локальным
пользователем.
\par 
kinit имя\_пользователя
\par 
Либо запросит пароль, либо напишет, что
не может войти и почему(не могу связаться
с сервером).
\par 
kdestroy — убрать билетик
\par 
/user/sbin/kadmin — поменять пароль(если время
не расходится) Создавать, блокировать,
заставить пользователя принудительно
поменять пароль.
\par ЦОД
— центр обработки данных(ldap,
ellowpages-\underline{устарело},
либо локально альтернатива kerberos).
\par 
Microsoft Active Detective(ldap + kerberos). Ldap — иерархическая
система.
\par 
NS — DNS-сервер.
\begin{enumerate}
	\item \par 
	авторитетный(отвечает за всю сеть)
	\item \par 
	кеширующий(рекурсивно) — экономит
	трафик.
\end{enumerate}
\par 
172.16.1.14 — DNS-сервер Бонча
\par 
Информация о пользователе хранится у
нас в DNS(ellowpages, ldap, Heziot).
\par 
Hesiot(проэкт Афина 1988г.) - имя пользователя,
группа, информация о пользователе в
текстовой записи.
\par COLLABORATION
— хранится информация и настройки 2х
принтеров, экспериментальные вещи,
система мониторинга здешних
компьютеров(сколько свободного места,
to
компьютера, что вообще с ним творилось).
\par 
DCTISRV — файл-сервер open-afs, кеширующий
DNS-сервер, внутренняя почтовая система.
\par 
Open-afs — как альтернатива nfs и
виндовой.
\par 
Недостатки: права на каталоги,
права отличаются (7) вместо (3) от
традиционных Unix'овых.
\begin{enumerate}
	\item \par —
	чтение/запись,
	чтение, либо исполнение(rlidwka)
\end{enumerate}
\par 
R — чтение(read) 

\par 
L — просмотр(list) 

\par 
I — добавление файлов(insert)
\par 
D — удаление(delete) 

\par 
W — запись(write) 

\par 
K - блокировка(knate)
\par 
A — администрирование(administration)
\par fs
setacl <папка>...
\par 
fs listacl <папка>...  - команды
управления правами файлов.
\par 
\underline{4 отдельных команды afs.}
\par 
bos — мониторинг и управление
серверами
\par 
vos — управление сервером томов
\par 
fs — управление файловой
системой(права, точки монтирования и
т.д.)
\par 
pts — управление под системой
пользователей и групп afs.
\par 
Достоинства:
\begin{enumerate}
	\item \par 
	система распределённая
	\item \par 
	система работоспособна при
	потере нескольких серверов(будут
	недоступны только файлы «умерших»(неработающих)
	серверов)
	\item \par 
	некоторые данные могут быть
	доступны для чтения.
\end{enumerate}
\par 
Вся система состоит из
томов(логическое понятие)(можно разбить
тома между серверами, «потрогать»,
посмотреть).
\par 
Реплики томов на других серверах(при
удалении сервера и сохранении файлов).
\par 
\underline{vos relize имя\_тома}
\par 
Квота — лимит на использование
дискового пространства. У каждого
пользователя свой том(200 Мб — классически).
\par 
По томам можно выполнять резервное
копирование.
\par 
Afs система стартует достаточно
долго, особенно если некорректно
выключить(40 минут) — 5-10 минут.
\par 
\underline{Что происходит, когда пользователь
логинится в систему:}
\par 
ets/x11/xdm/buttons.tc
\par ns/cd1/personal/fhuter/Projects/passwd
— хранение паролей
\par 
buider1/passwd\_builder/mk1 

\par 
ls
\par 
labor, teaches, stud\_groups
\par 
term screen
\par 
make — зависимость между файлами
\par Ctrl
A+»
\par 
Ctrl A+C — окно 

\par 
Ctrl + D — отцепить сессию
\par 
mv passwd/ets/service/tinydns/root
\par 
; (cd/ets/service/tinydns/root/; make) — обновить
passwd+сохранить(сделать)(обновить DNS)
\par 
k5login — локальный доступ без ввода
пароля
\par 
afs, kerberos, hesiod — там, где должен
храниться пользователь.
\begin{enumerate}
	\item \par 
	hesiod — список пользователей(passwd
	— имена, группа и т.д.), проверяется
	такой пользователь уже есть(если есть,
	то не трогается, если нет — добавить).
	По этому же списку создается файл,
	содержащий команды для добавления
	пользователей в kerberos и в afs — копируется
	полученный файл passwd в папку DNS-сервера
\end{enumerate}
\par 
\textit{\textbf{ets/servise/tinydns/root/;
make —}}
hesiod сделан.
\begin{enumerate}
	\item \par 
	afs
	— копируем файл pts-create и afs-create на любую
	машину, получаем права администратора(afs)
	на этой машине:
\end{enumerate}
\par 
\textit{\textbf{kinid user/afs}}
\par 
\textit{\textbf{aklog}}
\par 
Запускаем
pts-creat как скрипт: \textit{\textbf{sh
pts\_create}}
\par 
Снимаем привилегии администратора:


\par 
\textit{\textbf{kinid user\_name}}
\par 
\textit{\textbf{aklog}}
\begin{enumerate}
	\item \par 
	kerberos\_create отдаем любым доступным
	способом k-админу.
\end{enumerate}
\par 
LVM — logical volime manager
\par 
Физический диск 1
\begin{description}
	]
	
		
		
		
			
				\par С
			
			
				\par D
			
		
	
\end{description}
\par \\

\par 
Физический диск 2
\begin{description}
	]
	
		
		
			
				\par E
			
		
	
\end{description}
\par 
Позволяет физические диски
видеть как отделы(отдельное пространство).
\par 
\\

\begin{description}
	]
	
		
		
		
			
				\par 1 диск
			
			
				\par 2 диск
			
		
	
\end{description}
\par 
Размеры разделов можно «двигать».
\par 
\\

\par 
\underline{\textbf{Установка Debian(на сервер).}}
\par 
Expert
\par 
Русский
\par 
Модель: ru RU\_UTF8
\par 
en-U8
\par 
разметка дисков: вручную
\par 
Вне LVM — раздел BOOT
\par 
создаём новый раздел — 250
Мб(первичный)
\par 
Файловая система Exp2, куда: boot
\par 
159,8 Гб — физический том для LVM(использовать
как)
\par 
Настройка менеджера логических томов(LVM)
— Да.
\par 
Настройка LVM(физические и логические
тома) — группа томов
\par 
Создать группу томов(dcti — название)
\par 
dev/sda2
\par 
Создать логический том, название — root

\par 
/
\par 
/home
\par 
/var
\par 
/usr (основная часть системы)
\par 
/tmp (временные файлы) — для сервера это
достаточно
\par 
10 Гб — выделяем на root(размер логического
тома)
\par 
Создаём следующий том
\par 
var — 5 Гб
\par 
tmp — 5 Гб
\par 
usr — 10 Гб
\par 
home — пользовательские данные(10 Гб)
\begin{itemize}
	\item \par 
	закончить.
\end{itemize}
\par 
Появился список настроенных разделов.
\par 
home(использвать как) — XFS.
\par 
Файловые системы бывают журналируемые
и нежурналируемые(быстро восстанавливаются).
\par 
Точка монтирования: /home
\par 
Параметры монтирования: relatime(обновляет
блоками)
\par 
Остальные тома ставим аналогично.
\par 
Для домашней(клиентской) системы
достаточно 2 раздела: home и root.
\par 
Создаем ещё 1 том(раздел подкачки)
\par 
swap 1G
\par 
Использовать как — раздел подкачки.
\par 
Закончить разметку.
\begin{itemize}
	\item \par 
	Установка базовой системы
	\item \par 
	ядро для установки linux-image 2.6...
	\item \par 
	драйверы(специализированный)
	\item \par 
	настройка учётных записей пользователей
	и паролей.
\end{itemize}
\par 
Включить поддержку теневых(shadow) паролей
— Да
\par 
shadow — для администратора
\par 
Разрешить вход в систему суперпользователем
root — Да
\par 
Пароль суперпользователя: root
\par 
Создать учётную запись обычного
пользователя: Нет
\begin{itemize}
	\item \par 
	Настройка менеджера пакетов.
\end{itemize}
\par 
Софт ставится из набора пакетов.
\par 
Ip 192.168.0.4
\par 
Маска 255.255.255.0
\begin{itemize}
	\item \par 
	Выбор и установка ПО
\end{itemize}
\par 
Активные сервисы — частое обновление
\par 
Стандартная система: установка ПО
\par 
Alt+Shift -
\par 
нет временного переключателя
\begin{itemize}
	\item \par 
	Установка GRUB на жесткий диск (1ый)
\end{itemize}
\par 
Grub(пароль)
\begin{itemize}
	\item \par 
	Завершение установки.
\end{itemize}
\begin{itemize}
	\item \par 
	Системные часы показывают UTC: Да.
\end{itemize}
\par 
Где лежат сетевые настройки:
ets/network/interfaces
\par 
\\

\par 
\underline{\textbf{Установка Linux1 VirtualBox на Mac.}}
\begin{enumerate}
	\item \par 
	Запускаем Vbox.
	\item \par 
	Создать новую виртуальную машину(Lenni
	— на ЖД) — если надо.
	\item \par Старт
	или двойной щелчок на \underline{Lenni}.
	\item \par 
	Выбрать установочный носитель — файл
	образа debian.iso (ставим без рабочего
	стола!)
	\item \par 
	Запускаем установку.
\end{enumerate}
\par 
- intass options 

\par 
- epert
\par 
- выбрать русский язык
\par 
- UTF8
\par 
- CD — идём дальше
\par 
- Поиск и монтирование(все равно)
\par 
- 192.168.0.12 — petromay
\par 
- время — 192.168.0.1 

\par 
- Файловая система INITRD — образ драйверов
\par Разбивка
диска: авто — использовать весь диск и
настроить LVH(EFI).  \textbf{Файл}
\par Vbox
kaddisk →
все файлы в одном разделе.                      
                         \textbf{Подкачки}
\par Разметка
дисков →
записать изменения и настроить LVH
\par 
Разделы: 5 Гб, XFS
\par 
Точка монтирования: root
\par 
Параметры монтирования: relatime(notime)
\par 
Записать изменения на диск.
\par 
Установка базовой системы 2.6.26-2-686.
\par 
Специализированные драйвера.
\par 
Пользователи:
\par 
root — пароль 1
\par 
user — user.
\par 
EFI — замена(дополнение) BIOS, который
морально и физически устарел.
\par 
Настройка менеджера пакетов:
\begin{enumerate}
	\item \par 
	обновление безопасности
	\item \par 
	частые обновления
\end{enumerate}
\par 
apt — менеджер пакетов
\par 
Ctrl+Shift — переключение
\par 
Загрузка Linux:
\par 
Настройка сети(в терминале):
vim/ets/network/inerfaces
\par 
Сетевой мост — как switch(NAT — как роутер).
\par 
Проверяем сеть: ping 192.168.0.1 

\par 
Ctrl lc — остановить ping
\par 
Просмотр всех компьютеров в сети.
\par ssh
\underline{root@192.168.0.1.}
\par \underline{Попали
на сервер.}
\par \underline{Обратно:
Ctrl+D}
\par \\

\par 
\underline{Работа со скриптом — удаленный доступ
к экрану:}
\par 
screen -x — копия сервера, экран сервера.
\par 
Выход: Crtl+A+D, Crtl+A+'
\par \\

\par 
\underline{Поиск компьютера:}
\par 
for i in 'seq 120'; do echo -ne
\par 
	«1007»; sleep 0.1; done;
\par 
\underline{Настройка DHCP:}
\par 
apt-gct install dhcp3-server Enter
\par 
Реконфигурация после отмены предыдущей
команды:
\par 
dpkg — reconfigure dhcp3-server 

\par 
где dpkg — reconfigure — утилита реконфигурации
пакетов
\par 
Повторяем apt
\par 
Выводим сетевые интерфейсы
\par eth2(сначала
надо узнать какой) →
ifconfig -a(список интерфейсов) или mii-tool
\par 
Ещё вариант: ifconfig etho hw enter
\par 
Правка файла: vim /etc/dhcp3/dhcp.conf
\begin{enumerate}
	\item \par 
	имя домена: dcti.sut.ru
	\item \par 
	имя сервера(DNS b Ip-адрес)
	\item \par 
	default-lease-time — время, на которое выдается
	ip-адрес
	\item \par 
	максимальное время выдачи Ip
	\item \par 
	подсеть — subnet
\end{enumerate}
\par 
subnet 192.168.0.0 маска: 255.255.255.128
\par 
range: 192.168.0.2  192.168.0.126;
\par 
\}
\par 
(127 адрес — широковещательный)
\par 
/etc/init.d/dhcp3-server restart
\par 
Правила: /etc/network/interfaces
\par inet
statoc →
inet dhcp
\par 
Опускаемые сети: ifdown eth0
\par 
Подъемные сети: ifup eth0
\par 
Просмотр ip-адреса — ifconfig
\par Выключение
виртуального Linux — \underline{poweroff.}
\par 
\\

\par 
\underline{\textbf{Не работает DHCP, что могло отказать?}}
\begin{enumerate}
	\item \par 
	DHCP-srv (пинговать по Ip, по адресу, по имени)
\end{enumerate}
\par 
ping 172.16.64.10 (DNS не работает, сервер жив)
\par 
ping dcti.srv
\begin{enumerate}
	\item \par 
	DNS (не может создать адрес) + hesiod
\end{enumerate}
\par 
ping ns
\par 
        172.16.64.4
(если пингуется, виртуальная машина с
DNS работает)
\begin{enumerate}
	\item \par 
	может «отвалиться» сама сетка
\end{enumerate}
\par 
Настраиваем 2 соседних компьютера и
собираемся их пинговать. (Bios, отключить
сетевую загрузку(mist) когда компьютеры
не включаются)
\par 
Рабочий диапазон кафедры ЦВТИ: [172.16.0.0
... 172.16.67.255]
\begin{enumerate}
	\item \par 
	210 ауд. (Шахов Андрей) с вопросами о
	работе сети
	\item \par 
	не работает KDS — kerberos
\end{enumerate}
\par 
ping KDS(172.16.64.5)
\par 
Половина пользователей могут войти,
половина входит — ping DNS
\par 
Не появляется окно ввода логина.
\par 
\underline{\textbf{Root недоступен(рассыпана файловая
система), что делать?}}
\begin{enumerate}
	\item \par 
	Запустить проверку файловой системы
	в режиме Admin Tools
\end{enumerate}
\par 
boot resque linux system
\par 
мог не выйти при проблеме с сетью
\begin{enumerate}
	\item \par 
	login: root 
	
	\item \par 
	\# vgchange -ay(локальные тома)
	\item \par 
	\# xfs\_repair/dev/mapper/группа томов-root
	\item \par 
	\# mount/dev/mapper/c508-root/mnt/hda — монтируем
	\item \par 
	проверка 
	
\end{enumerate}
\par 
ls lost + found/mnt/hda — покажет то, с чем была
потеряна связь
\begin{enumerate}
	\item \par 
	\# reboot Ctrl+Alt+Delete — перезапускаемся
\end{enumerate}
\par 
Если не заработало, то значит сломалось
что-то другое.
\par 
\\

\par 
Boot memory tester — тестер памяти.
\par 
Grub — вход с любого пользователя.
\par 
Freedos — DOS.
\par 
Ghost — копирование дисков.
\par 
Netdos — сетевой DOS.
\par 
\\

\par 
Kadmin — если забыл пароль:
\par 
change\_password cpw
\par 
modpring+needchange ИМЯ\_ПОЛЬЗОВАТЕЛЯ — сменить
пароль при первом входе
\par 
getpring ИМЯ\_ПОЛЬЗОВАТЕЛЯ — информация о
пользователе(когда менял пароль, можно
ли ему менять пароли и т.д.)
\par 
PAM система — позволяет расширять функции
авторизации и информации об аккаунтах.(Мы
хотим разрешить вход в систему отдельным
пользователям. Билеты на вход в kerberos
для пользователей.)
\par 
\\

\par 
\underline{\textbf{Make-утилита.}}
\par 
Есть большой проект, как будем собирать?
\par 
makefile — в нем описываются правила
сборки(генерация файлов из одних в
других)
\par 
Пишем правила сборки:
\par 
all: progect1
\par 
progect1: main.o progect1.o progect2.o
\par 
main.o: main.c
\par 
|\_\_| gcc -c main.c -omain.o — скомпелирует main.c,
выведет как main.o
\par 
\underline{Зарезервированные символы.}
\par 
\$@ - заменяется на цепь сборки
\par 
\$\^{} -  заменяется на 

\par 
\$< - заменяется на 1ую зависимость
\par 
CC — стандартный компилятор
\par 
LD -
\par 
CFLAGS -
\par 
LDFLAGS -
\par 
CC = gcc
\par 
LC = gcc
\par 
CFLAGS = -g -MMD
\par 
LDFLAGS = -g
\par 
SRCS = main.c file1.c file2.c
\par 
OBJS = main.o file1.o file2.o
\par 
all: main
\par 
main: main.o file1.o file2.o
\par 
\$(LD)\$(2DFLAGS) \$\^{} -o \$@
\par 
\%.o \%.c
\par 
\$(CC) -c\$(CFLAGS)\$< -o\$@
\par 
\%.d \%.o
\par 
clen:
\par 
	-rm*.o
\par 
\underline{\textbf{Настройка машины-сервера DNS.}}
\par 
Пароль
\par 
Boot Device Priority
\par 
Est Boot Dev
\par 
root — root 

\par 
поставить DNS-сервер, Tiny DNS(при изменении
базы не надо реставрировать)
\par 
apt-get install tinydns
\par 
apt-cache search tinydns
\par 
apt-cdrom add — регистрация имеющихся дисков,
чтобы скачать пакеты программ и установить
с диска( диск1, диск2)
\par 
-$\,$-$\,$-$\,$-$\,$-$\,$-
\par 
\underline{Система управления процессами.}
\par 
init — от него идёт всё дерево процессов
\par 
ps ax
\par 
конфигурация: /ets/inittab
\par 
Runlevel — набор запасных сервисов
\par 
S — первый старт
\par 
0 — выключение
\par 
6 — перезагрузка
\par 
Умеет перезапускать процессы.
\par 
init ng — система запуска, поддерживает
параллельный запуск
\par 
upstart
\par 
daemon tools — sv scan(1), runnit(2)
\begin{enumerate}
	\item \par —
	из
	скриптов с указанием каталога находит
	файл run и его выполняет(все ключевые
	службы на сервере за отдельными
	исключениями)
\end{enumerate}
\par 
В Daemon Tools — утилита ведения логов multilog
\par 
ucspi-tcp — позволяет превратить любую
программу стандартного входа(выхода)
в tcp-сервер.
\par 
-$\,$-$\,$-$\,$-$\,$-$\,$-
\par 
tinydns-conf
\par 
Если мы не помним как устанавливать —
идём в документацию:
\par 
usr/share/doc/djbdns
\par 
\underline{man tinydns-conf}
\par 
useradd — создать нового пользователя  

\par 
usermod -d/tmp/ dns\_user/vim/etc/pswd
\par 
tinydns conf dns\_user dns\_user/etc/service 

\par 
(Создать фиктивного пользователя для
лог-системы) 

\par 
multilog
\par 
tinydns-cinf dns\_user multilog/etc/servise/
\par 
tinydns 127.0.0.1
\par 
exec 2>\&1 — перенаправление потока
\par 
2 — stdf, 1 — stdout
\par 
make — ets/service/tinydns/root/data/ - создаем базу
\par 
cd
\par 
svstat/etc/servise/tinydns
\par 
svs — остановить dns
\par 
svstat — показывает текущее состояние dns
\par 
alias — дополнительное имя хоста
\par 
childns -
\par 
host — добавляет компьютер
\par 
nx -
\par 
ns — зона ответственности
\par 
add-ns somedomain.ru 192.168.0.1 

\par 
make
\par 
add-host server.somedomain 192.168.0.1 

\par 
make
\par 
somedomain.ru: 192.168.0.1: a: 259200
\par 
168.192.in-addr.arpa: 192.168.0.1: a:259200
\par 
DNS-кеш настраивается аналогично.
\par 
dnscache-conf — не всязан с dns(bind — хуже)
\par 
недостаток: djbdns не поддерживает на
прямую.
\par 
\underline{Графическая подсистема.}
\par 
Прозрачная для сети. Переменное окружение
— дисплей.
\par 
Kerberos
\par 
open-afs
\par 
\\

\par 
\underline{\textbf{Afs, Kerberos, Hesiod.}}
\par 
Компоненты состоят из задач:
\begin{enumerate}
	\item \par 
	Хранить файлы.
	\item \par 
	Проверять пароль.
	\item \par 
	Хранить информацию о пользователе.
\end{enumerate}
\par 
 

\par 
            

\par 
                                 сервер
\par 
\\

\par 
\\

\par 
\\

\par 
\\

\par 
\\

\par 
\\

\par 
\\

\par 
\\

\par 
\\

\par 
\\

\par 
\\

\par 
\\

\par 
\\

\par 
\\

\par 
Недостаток: hesiod не может самостоятельно
обновлять базу.
\par 
Hesiod — для удобства.
\par 
Libnss-afs — использование пользовательских
данных из afs.
\par \underline{Клиентская
сторона: }в
debian ставится module-assistant, через него
open-afs, затем open-afs клиент(теоретически
достаточно).
\par 
Пакеты libpam-openafs-session — по билету получаем
права kerberos
\par 
	  libpam-krb5 — автоматически получаем пароли
kerberos.
\par 
Настройка pam: /etc/pam.d/.... common-*
\par 
При open-afs нужен отдельный раздел(50 Мб)
для кеша.(Файл выполняется локально и
кешируется) ax2 и ax3
\par 
При обновлении версии ядра afs «отвалится»(не
забываем обновить сперва драйвер).
\par 
Конфигурация лежит: /etc/openafs
\par 
CellSarvDB — прописано соответствие ячеек.
\par 
Указать размер кеша, следует заглянуть
в /etc/openafs/afs.conf.client — настройка шифрователей,
обмен данными.
\par 
Клиент к kerberos(ставится автоматически).
\par 
Разумно отвечаем на вопросы к
установке(адреса kerberos, имя ячейки, размер
кеша и т.д.)
\par \underline{На
сервере: }
3 автономных вещи, могут находиться на
разных серверах, kerberos должен находится
на отдельном сервере.
\par 
\underline{Hesiod.}
\par 
Информация о пользователе.
\par Запрос
пользователя: test.passwd.\underline{hesiod}.\underline{dcti.sut.ru}
\par 
                                                            |
             |
\par 
                                                           lhs	
  rhs
\par 
gpoup, gpoup\_list, uid
\begin{itemize}
	\item \par 
	host TXT...
\end{itemize}
\par 
passwd — по имени
\par 
uid — по номеру
\par 
group\_list — по группам(в целом)
\par 
gpoup — в какой группе пользователь 

\par 
Подключаем hesiod => /etc/nsswirch.conf
\par 
Находим passwd: files hesiod
\par 
	    group: files hesod
\par 
Правим 2ой файл(конфигурация hesiod):
\par 
lhs = hesiod
\par 
rhs = dcti.sut.ru (наш домен)
\par 
classes = IN (проект «Афина»)
\par 
5 записей на каждого пользователя.
\par 
Как проверить, что работает hesiod: в
командной строке id<имя\_пользователя>
- если работает — выдаст информацию о
пользователе, не работает — скажет, что
такого пользователя нет.
\par 
\underline{Kerberos.}
\par 
Есть понятие realm(зона) — сфера kerberos.
\par 
Realm DCTI.SUT.RU — большими буквами имя домена
\par 
имя/постфикс@REALM — в нашей ответственности
\par 
У пользователя может быть несколько
вариантов. Может быть несколько
пользователей(обычный, с администраторскими
правами, администратор kerberos — права
доступа, разделение прав).
\par Хранятся
ключи локальных машин(пользователь
вида): \underline{host/fydn@REALM}


\par 
где host — имя машины, fydn — домен.
\par 
Kerberos нужен для того, чтобы вводить пароль
1 раз для входа в систему.
\par 
В общем случае(для принтера и т.д.) -
имя\_сервиса/fydn@REALM
\par 
На клиенте ставятся пакеты:
\par 
krb5-clients		на процессе установки спросит,
где находится kerberos-сервер
\par 
-//- -user
\par 
-//- -config
\par 
/etc/krb5.conf — конфигурация
\par 
Время на машинах должно расходится не
более, чем на 10 минут(для нормальной
работы kerberos). Для этого нужен сервер с
синхронизацией времени NTP(ntp-date — если
периодически).
\par 
                                пакет
\par 
Сервер:

\par 
Клиентские пакеты — для тестирования.(Несколько
реализаций — MIT, heimdal).
\par 
Вооружиться мануалом по krb.
\par 
Утилита kadmin-local — создает мастер-ключ
и начальных пользователей(начальная
загрузка и аварийные ситуации. В остальных
случаях не рекомендуется.)
\par 
Для тонкой настройки — к руководству.
\par 
\\

\par 
\underline{Open-Afs.}
\par 
Сервер — 2 пакета.
\par 
Распределённый файл — сервер может
быть не один(может быть несколько).
\par 
В Debian 2 компонента:
\begin{enumerate}
	\item \par 
	openafs file server
	\item \par 
	db server
\end{enumerate}
\par 
База томов, база пользователей, база
распределённая.
\par 
1 Проблема: 2 сервера, 1 вылетел — изменения
в базу не внести(есть критическая норма
работы сервера.)
\par 
file server (для хранения содержимого томов)
\par 
/vice pa
\par 
  pb
\par 
  pc
\par 
Журналируемая файловая система, хранится
в своём собственном формате, т.е. Файлов
пользователей как таковых не видно.
\par 
студенты(pa), персонал(pb) ... и т.д.
\par 
\underline{OpenVPN.}
\par 
Afs-srv: настройки лежат в /etc/openafs/server
\par 
Файл cls.sdb — список ячеек в afs(имя ячейки
должно совпадать с kerberos REALM)
\par 
ThisCell — имя ячейки
\par 
CellServDB — символьная ссылка
\par 
Keyfile — ключевой файл
\par 
UserList — пользователи с администраторскими
правами
\par 
Запись пользователей (kerberos 4) через (.) -
kaserver
\par 
\underline{Утилиты для администрирования
Afs-server(клиентские).}
\par 
Pts — управление пользователями и
группами(может использоваться простым
пользователем, т.к. может создать свою
подгруппу)
\par 
fs — права на папку(монтирование,
управление правами)
\par 
vos — управление сервером томов(статус,
перемещение томов между серверами,
удаление, добавление)
\par 
bos — управление целиком afs-srv
\par 
\underline{Резервное копирование.}
\par 
Тома могут располагаться на нескольких
серверах(vos relice — только на чтение, смена
флажков чтение/запись)
\par 
SSO(Single Sing On) — пароль на логин набирается
1 раз.
